---
import { Media } from 'accessible-astro-components'
import { Icon } from 'astro-icon/components'
import WhereToWatch from './WhereToWatch.astro'

const { movie } = Astro.props
---

<section class=`my-12`>
  <div class="container">
    <div class="grid grid-cols-1 gap-24 md:grid-cols-2">
      <Media class="img-bg" src=`https://image.tmdb.org/t/p/w500${movie.backdrop_path}` />
      <Media class="rounded-lg" src=`https://image.tmdb.org/t/p/w500${movie.poster_path}` />
      <div class="space-content flex flex-col justify-center">
        <h3>{movie.title}</h3>
        <p class="flex items-center gap-2 text-xs">
          <span class="p-2 border rounded-lg">{new Date(movie.release_date).getFullYear()}</span>
          <span class="p-2 border rounded-lg flex items-center gap-2">{movie.vote_average.toFixed(1)} / 10 <Icon name="mdi:star" /></span>
          {movie.genres.map(c => <span class="p-2 border rounded-lg">{c.name}</span>)}
        </p>
        <p class="text-2xl">
          {movie.overview}
        </p>

        <WhereToWatch movie={movie} />
      </div>
    </div>
  </div>
</section>

<style lang="scss" is:global>
  .img-bg {
    position: absolute;
    top: 0;
    left: 0;
    min-width: 100%;
    min-height: 100%;
    z-index: -1;
    opacity: 0.2;
    filter: blur(5px)
  }
</style>
